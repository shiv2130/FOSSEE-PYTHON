{% extends "workshop_app/base.html" %}
{% load static %}
{% load custom_filters %}

{% block title %}
    My Workshops
{% endblock %}



{% block content %}
<div class="card">
    {% if not workshops %}
        <div class="welcome-message">
            <h1>Welcome, {{ user.first_name|title }}!</h1>
            <p>Information related to your workshops will be shown here. You can also propose a Workshop as per your available date in the <strong>Propose Workshop</strong> tab.</p>
        </div>
    {% else %}
        <section style="padding: var(--spacing-lg);">
            <h2 class="page-header">Workshops Accepted</h2>
            <div class="workshop-grid">
                {% for workshop in workshops %}
                    {% if workshop.status %}
                        <a href="{% url 'workshop_app:workshop_details' workshop.id %}" class="workshop-card-link">
                            <div class="workshop-card">
                                <div class="workshop-card-body">
                                    <h3>{{ workshop.workshop_type|capfirst }}</h3>
                                    <div class="workshop-detail">
                                        <i class="fas fa-user-tie"></i>
                                        <span>{{ workshop.instructor.get_full_name }}</span>
                                    </div>
                                    <div class="workshop-detail">
                                        <i class="fas fa-calendar-alt"></i>
                                        <span>{{ workshop.date|date:"F j, Y" }}</span>
                                    </div>
                                </div>
                                <div class="workshop-card-footer">
                                    <span class="status-badge accepted">{{ workshop.get_status }}</span>
                                </div>
                            </div>
                        </a>
                    {% endif %}
                {% endfor %}
            </div>
        </section>

        <hr style="margin: 0 var(--spacing-lg); border: none; border-top: 1px solid var(--border-color);">

        <section style="padding: var(--spacing-lg);">
            <h2 class="page-header">Workshops Proposed By Me</h2>
            <div class="workshop-grid">
                {% for workshop in workshops %}
                    {% if not workshop.status and workshop.tnc_accepted %}
                        <a href="{% url 'workshop_app:workshop_details' workshop.id %}" class="workshop-card-link">
                            <div class="workshop-card">
                                <div class="workshop-card-body">
                                    <h3>{{ workshop.workshop_type|capfirst }}</h3>
                                    <div class="workshop-detail">
                                        <i class="fas fa-calendar-alt"></i>
                                        <span>{{ workshop.date|date:"F j, Y" }}</span>
                                    </div>
                                </div>
                                <div class="workshop-card-footer">
                                    <span class="status-badge pending">{{ workshop.get_status }}</span>
                                </div>
                            </div>
                        </a>
                    {% endif %}
                {% endfor %}
            </div>
        </section>
    {% endif %}
</div>
{% endblock %}